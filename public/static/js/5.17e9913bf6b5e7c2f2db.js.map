{"version":3,"sources":["webpack:///src/page/shopList.vue","webpack:///./src/page/shopList.vue?7bd9","webpack:///./src/page/shopList.vue"],"names":["shopList","data","baseUrl","env","baseImgPath","city","offset","limit","count","tableData","currentPage","selectTable","dialogFormVisible","categoryOptions","selectedCategory","address","created","this","initData","components","headTop","methods","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","countData","wrap","_context","prev","next","Object","getData","sent","status","Error","getResturants","t0","console","log","stop","getCategory","_this2","_callee2","_context2","forEach","item","sub_categories","length","addnew","value","name","label","children","subitem","index","push","_this3","_callee3","_city","latitude","longitude","restaurants","_context3","date","Date","now","description","id","phone","rating","recent_order_num","category","image_path","handleSizeChange","val","handleCurrentChange","handleEdit","row","split","addFood","$router","path","query","restaurant_id","handleDelete","_this4","_callee4","res","_context4","$message","type","message","splice","querySearchAsync","queryString","cb","_this5","_callee5","cityList","_context5","Array","map","addressSelect","vale","handleServiceAvatarScucess","file","error","beforeAvatarUpload","isRightType","isLt2M","size","updateShop","_this6","_callee6","_context6","assign_default","join","page_shopList","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","width","attrs","scopedSlots","_u","key","fn","props","label-position","inline","_s","prop","scope","on","click","$event","$index","current-page","page-size","layout","total","size-change","current-change","title","visible","update:visible","model","label-width","auto-complete","callback","$$v","$set","expression","fetch-suggestions","placeholder","select","options","change-on-select","action","show-file-list","on-success","before-upload","src","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.17e9913bf6b5e7c2f2db.js","sourcesContent":["<template>\r\n  <div class=\"fillcontain\">\r\n    <head-top></head-top>\r\n    <div class=\"table_container\">\r\n      <el-table :data=\"tableData\" style=\"width: 100%\">\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"props\">\r\n            <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n              <el-form-item label=\"店铺名称\">\r\n                <span>{{ props.row.name }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"店铺地址\">\r\n                <span>{{ props.row.address }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"店铺介绍\">\r\n                <span>{{ props.row.description }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"店铺 ID\">\r\n                <span>{{ props.row.id }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"联系电话\">\r\n                <span>{{ props.row.phone }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"评分\">\r\n                <span>{{ props.row.rating }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"销售量\">\r\n                <span>{{ props.row.recent_order_num }}</span>\r\n              </el-form-item>\r\n              <el-form-item label=\"分类\">\r\n                <span>{{ props.row.category }}</span>\r\n              </el-form-item>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- column prop=\"name\" 就是 tableData 数据中 的 name-->\r\n        <el-table-column label=\"店铺名称\" prop=\"name\"></el-table-column>\r\n        <el-table-column label=\"店铺地址\" prop=\"address\"></el-table-column>\r\n        <el-table-column label=\"店铺介绍\" prop=\"description\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"300\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n            <el-button size=\"mini\" type=\"Success\" @click=\"addFood(scope.$index, scope.row)\">添加食品</el-button>\r\n            <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"Pagination\">\r\n        <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-size=\"20\"\r\n          layout=\"total, prev, pager, next\"\r\n          :total=\"count\"\r\n        ></el-pagination>\r\n      </div>\r\n      <!-- 编辑会话框 -->\r\n      <el-dialog title=\"修改店铺信息\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form :model=\"selectTable\">\r\n          <el-form-item label=\"店铺名称\" label-width=\"100px\">\r\n            <el-input v-model=\"selectTable.name\" auto-complete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"详细地址\" label-width=\"100px\">\r\n            <el-autocomplete\r\n              v-model=\"address.address\"\r\n              :fetch-suggestions=\"querySearchAsync\"\r\n              placeholder=\"请输入地址\"\r\n              style=\"width: 100%;\"\r\n              @select=\"addressSelect\"\r\n            ></el-autocomplete>\r\n            <span>当前城市：{{city.name}}</span>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺介绍\" label-width=\"100px\">\r\n            <el-input v-model=\"selectTable.description\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"联系电话\" label-width=\"100px\">\r\n            <el-input v-model=\"selectTable.phone\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"店铺分类\" label-width=\"100px\">\r\n            <el-cascader :options=\"categoryOptions\" v-model=\"selectedCategory\" change-on-select></el-cascader>\r\n          </el-form-item>\r\n          <el-form-item label=\"商铺图片\" label-width=\"100px\">\r\n            <el-upload\r\n              class=\"avatar-uploader\"\r\n              :action=\"baseUrl + '/v1/addimg/shop'\"\r\n              :show-file-list=\"false\"\r\n              :on-success=\"handleServiceAvatarScucess\"\r\n              :before-upload=\"beforeAvatarUpload\"\r\n            >\r\n              <img\r\n                v-if=\"selectTable.image_path\"\r\n                :src=\"baseImgPath + selectTable.image_path\"\r\n                class=\"avatar\"\r\n              >\r\n              <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n            </el-upload>\r\n          </el-form-item>\r\n        </el-form>\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"updateShop\">确 定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport headTop from \"../components/headTop\";\r\nimport { baseUrl, baseImgPath } from \"@/config/env\";\r\nimport {\r\n  cityGuess,\r\n  getResturants,\r\n  getResturantsCount,\r\n  foodCategory,\r\n  updateResturant,\r\n  searchplace,\r\n  deleteResturant\r\n} from \"@/api/getData\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      baseUrl,\r\n      baseImgPath,\r\n      city: {},\r\n      offset: 0,\r\n      limit: 20,\r\n      count: 0,\r\n      tableData: [],\r\n      currentPage: 1,\r\n      selectTable: {},\r\n      dialogFormVisible: false,\r\n      categoryOptions: [],\r\n      selectedCategory: [],\r\n      address: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.initData();\r\n  },\r\n  components: {\r\n    headTop\r\n  },\r\n  methods: {\r\n    async initData() {\r\n      try {\r\n        this.city = await cityGuess();\r\n        const countData = await getResturantsCount();\r\n        if (countData.status == 1) {\r\n          this.count = countData.count;\r\n        } else {\r\n          throw new Error(\"获取数据失败\");\r\n        }\r\n        this.getResturants();\r\n      } catch (err) {\r\n        console.log(\"获取数据失败\", err);\r\n      }\r\n    },\r\n    async getCategory() {\r\n      try {\r\n        const categories = await foodCategory();\r\n        categories.forEach(item => {\r\n          if (item.sub_categories.length) {\r\n            const addnew = {\r\n              value: item.name,\r\n              label: item.name,\r\n              children: []\r\n            };\r\n            item.sub_categories.forEach((subitem, index) => {\r\n              if (index == 0) {\r\n                return;\r\n              }\r\n              addnew.children.push({\r\n                value: subitem.name,\r\n                label: subitem.name\r\n              });\r\n            });\r\n            this.categoryOptions.push(addnew);\r\n          }\r\n        });\r\n      } catch (err) {\r\n        console.log(\"获取商铺种类失败\", err);\r\n      }\r\n    },\r\n    async getResturants() {\r\n      const { latitude, longitude } = this.city;\r\n      const restaurants = await getResturants({\r\n        latitude,\r\n        longitude,\r\n        offset: this.offset,\r\n        limit: this.limit,\r\n        date:Date.now()\r\n      });\r\n      this.tableData = [];\r\n      restaurants.forEach(item => {\r\n        const tableData = {};\r\n        tableData.name = item.name;\r\n        tableData.address = item.address;\r\n        tableData.description = item.description;\r\n        tableData.id = item.id;\r\n        tableData.phone = item.phone;\r\n        tableData.rating = item.rating;\r\n        tableData.recent_order_num = item.recent_order_num;\r\n        tableData.category = item.category;\r\n        tableData.image_path = item.image_path;\r\n        this.tableData.push(tableData);\r\n      });\r\n    },\r\n    handleSizeChange(val) {\r\n      console.log(`每页 ${val} 条`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.offset = (val - 1) * this.limit;\r\n      this.getResturants();\r\n    },\r\n    handleEdit(index, row) {\r\n      this.selectTable = row;\r\n      this.address.address = row.address;\r\n      this.dialogFormVisible = true;\r\n      this.selectedCategory = row.category.split(\"/\");\r\n      if (!this.categoryOptions.length) {\r\n        this.getCategory();\r\n      }\r\n    },\r\n    addFood(index, row) {\r\n      this.$router.push({ path: \"addGoods\", query: { restaurant_id: row.id } });\r\n    },\r\n    async handleDelete(index, row) {\r\n      try {\r\n        const res = await deleteResturant(row.id);\r\n        if (res.status == 1) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"删除店铺成功\"\r\n          });\r\n          this.tableData.splice(index, 1);\r\n        } else {\r\n          throw new Error(res.message);\r\n        }\r\n      } catch (err) {\r\n        this.$message({\r\n          type: \"error\",\r\n          message: err.message\r\n        });\r\n        console.log(\"删除店铺失败\");\r\n      }\r\n    },\r\n    async querySearchAsync(queryString, cb) {\r\n      if (queryString) {\r\n        try {\r\n          const cityList = await searchplace(this.city.id, queryString);\r\n          if (cityList instanceof Array) {\r\n            cityList.map(item => {\r\n              item.value = item.address;\r\n              return item;\r\n            });\r\n            cb(cityList);\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    },\r\n    addressSelect(vale) {\r\n      const { address, latitude, longitude } = vale;\r\n      this.address = { address, latitude, longitude };\r\n    },\r\n    handleServiceAvatarScucess(res, file) {\r\n      if (res.status == 1) {\r\n        this.selectTable.image_path = res.image_path;\r\n      } else {\r\n        this.$message.error(\"上传图片失败！\");\r\n      }\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isRightType =\r\n        file.type === \"image/jpeg\" || file.type === \"image/png\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n      if (!isRightType) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isRightType && isLt2M;\r\n    },\r\n    async updateShop() {\r\n      this.dialogFormVisible = false;\r\n      try {\r\n        Object.assign(this.selectTable, this.address);\r\n        this.selectTable.category = this.selectedCategory.join(\"/\");\r\n        const res = await updateResturant(this.selectTable);\r\n        if (res.status == 1) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"更新店铺信息成功\"\r\n          });\r\n          this.getResturants();\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.message\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.log(\"更新餐馆信息失败\", err);\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scope=\"this api replaced by slot-scope in 2.5.0+\">\r\n@import \"../style/mixin\";\r\n.el-table .cell {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n.demo-table-expand {\r\n  font-size: 0;\r\n}\r\n.demo-table-expand label {\r\n  width: 90px;\r\n  color: #99a9bf;\r\n}\r\n.demo-table-expand .el-form-item {\r\n  margin-right: 0;\r\n  margin-bottom: 0;\r\n  width: 50%;\r\n}\r\n.table_container {\r\n  padding: 20px;\r\n}\r\n.Pagination {\r\n  display: flex;\r\n  justify-content: flex-start;\r\n  margin-top: 8px;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #20a0ff;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 120px;\r\n  height: 120px;\r\n  line-height: 120px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  height: 120px;\r\n  display: block;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/shopList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"fillcontain\"},[_c('head-top'),_vm._v(\" \"),_c('div',{staticClass:\"table_container\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"店铺名称\"}},[_c('span',[_vm._v(_vm._s(props.row.name))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺地址\"}},[_c('span',[_vm._v(_vm._s(props.row.address))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺介绍\"}},[_c('span',[_vm._v(_vm._s(props.row.description))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺 ID\"}},[_c('span',[_vm._v(_vm._s(props.row.id))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话\"}},[_c('span',[_vm._v(_vm._s(props.row.phone))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"评分\"}},[_c('span',[_vm._v(_vm._s(props.row.rating))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"销售量\"}},[_c('span',[_vm._v(_vm._s(props.row.recent_order_num))])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"分类\"}},[_c('span',[_vm._v(_vm._s(props.row.category))])])],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"店铺名称\",\"prop\":\"name\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"店铺地址\",\"prop\":\"address\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"店铺介绍\",\"prop\":\"description\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"300\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"Success\"},on:{\"click\":function($event){return _vm.addFood(scope.$index, scope.row)}}},[_vm._v(\"添加食品\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_vm._v(\" \"),_c('div',{staticClass:\"Pagination\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-size\":20,\"layout\":\"total, prev, pager, next\",\"total\":_vm.count},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"修改店铺信息\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.selectTable}},[_c('el-form-item',{attrs:{\"label\":\"店铺名称\",\"label-width\":\"100px\"}},[_c('el-input',{attrs:{\"auto-complete\":\"off\"},model:{value:(_vm.selectTable.name),callback:function ($$v) {_vm.$set(_vm.selectTable, \"name\", $$v)},expression:\"selectTable.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"详细地址\",\"label-width\":\"100px\"}},[_c('el-autocomplete',{staticStyle:{\"width\":\"100%\"},attrs:{\"fetch-suggestions\":_vm.querySearchAsync,\"placeholder\":\"请输入地址\"},on:{\"select\":_vm.addressSelect},model:{value:(_vm.address.address),callback:function ($$v) {_vm.$set(_vm.address, \"address\", $$v)},expression:\"address.address\"}}),_vm._v(\" \"),_c('span',[_vm._v(\"当前城市：\"+_vm._s(_vm.city.name))])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺介绍\",\"label-width\":\"100px\"}},[_c('el-input',{model:{value:(_vm.selectTable.description),callback:function ($$v) {_vm.$set(_vm.selectTable, \"description\", $$v)},expression:\"selectTable.description\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"联系电话\",\"label-width\":\"100px\"}},[_c('el-input',{model:{value:(_vm.selectTable.phone),callback:function ($$v) {_vm.$set(_vm.selectTable, \"phone\", $$v)},expression:\"selectTable.phone\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"店铺分类\",\"label-width\":\"100px\"}},[_c('el-cascader',{attrs:{\"options\":_vm.categoryOptions,\"change-on-select\":\"\"},model:{value:(_vm.selectedCategory),callback:function ($$v) {_vm.selectedCategory=$$v},expression:\"selectedCategory\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"商铺图片\",\"label-width\":\"100px\"}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.baseUrl + '/v1/addimg/shop',\"show-file-list\":false,\"on-success\":_vm.handleServiceAvatarScucess,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.selectTable.image_path)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.baseImgPath + _vm.selectTable.image_path}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updateShop}},[_vm._v(\"确 定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4be77aec\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/shopList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4be77aec\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./shopList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./shopList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./shopList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4be77aec\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./shopList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/shopList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}